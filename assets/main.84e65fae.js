const I=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};I();const k=document.querySelector(".app"),L=document.querySelector(".modal"),v={method:"GET",headers:{"X-RapidAPI-Key":"46b09705b0msh419e77df9426930p19b7e4jsn2eb1d4271df5","X-RapidAPI-Host":"weatherapi-com.p.rapidapi.com"}},l=async t=>{try{const o=await(await fetch(`https://weatherapi-com.p.rapidapi.com/forecast.json?q=${t}&days=3`,v)).json();let{current:e,location:s}=o,{condition:n,humidity:r,temp_c:p,precip_in:y,feelslike_c:g}=e,{region:f,country:h}=s,{icon:b}=n;k.innerHTML=`<div class="weather">
                      <div class="header">
                      <span class="poblacion">${t}</span>
                      <button  title="Elige otra poblaci\xF3n." type="button" id="icono" onclick="changeCity()" class="icono"><span class="material-symbols-outlined"> settings </span></button><br>

                      <span class="region">${f}</span>
                      <span class="country">(${h})</span>
                      <br></div>
                      <span><strong>Temp:</strong> ${p}\xBA,</span>
                      <span><strong>Sensaci\xF3n:</strong> ${g}\xBA</span><br>
                      <span><strong>Humedad:</strong> ${r}%,</span>
                      <span><strong>Lluvia hoy:</strong> ${y}mm</span><br>
                      <img src="${b}"/>                   
                    </div>
    `}catch{L.classList.add("modal--show")}},E=document.querySelector(".modal__close"),u=document.querySelector(".modal__input"),d=document.querySelector(".modal"),S=()=>{try{let t=JSON.parse(localStorage.getItem("city"));l(t.nombre),setInterval(l,3e5,t.nombre)}catch{d.classList.add("modal--show")}};window.changeCity=()=>{d.classList.add("modal--show")};E.addEventListener("click",()=>{let t=u.value,i={nombre:t};localStorage.setItem("city",JSON.stringify(i));let o=JSON.parse(localStorage.getItem("city"));t!=""&&t!=null?(l(o.nombre),setInterval(l,3e5,o.nombre),d.classList.remove("modal--show")):alert("Campo obligatorio"),u.value=""});const c=document.querySelector(".container-tasks");document.querySelector(".container-form").innerHTML=`<label for="inputText" class="tarea fs-2">Nueva tarea:</label>
        <input autocomplete="off" id="inputText" onchange="newTask()" type="text" class="form-control" autofocus placeholder="Introduce el texto">`;var a=[];const w=()=>{c.innerHTML=" ";const t=JSON.parse(localStorage.getItem("tasks"));if(t!=null){const i=t.map((o,e)=>`<div id="${e}" class="task animate__animated">
                                <div class="form-check">
                                  <input onchange="done(${e})" value="true" class="form-check-input" type="checkbox" id="${e+100}">
                                    <label class="form-check-label" for="defaultCheck1">
                                    <p class="h5">${o.description}</p>
                                    </label>
                                </div>
                                  
                                  <button id="${e+150}" class="icon" onclick="deleteTask(${e})" ><span title="Eliminar" class="material-symbols-outlined">delete</span></button>
                                  <button id="${e+200}" class="icon" onclick="setPriority(${e})" ><span title="Prioridad alta" class="material-symbols-outlined">priority_high</span></button>
                                </div>`);c.innerHTML=i.join(""),t.forEach((o,e)=>{if(o.new===!0&&(document.getElementById(e).classList.add("animate__zoomIn"),setTimeout(()=>{document.getElementById(e).classList.remove("animate__zoomIn")},1e3)),o.done===!0){let s=e+100;document.getElementById(e).classList.add("task--done"),document.getElementById(s).checked=!0}if(o.priority==="high"){let s=e+150,n=e+200;document.getElementById(e).classList.add("priority--high"),document.getElementById(s).classList.add("icon--priority"),document.getElementById(n).classList.add("icon--priority")}}),t.forEach(o=>a.push(o))}};w();window.newTask=()=>{let i={description:inputText.value,done:!1,priority:"low",new:!1};a.push(i),localStorage.setItem("tasks",JSON.stringify(a)),m()};const m=()=>{c.innerHTML=" ";const t=JSON.parse(localStorage.getItem("tasks")),i=t.map((o,e)=>`<div id="${e}" class="task animate__animated">
                                <div class="form-check">
                                  <input onchange="done(${e})" value="true" class="form-check-input" type="checkbox" id="${e+100}">
                                    <label class="form-check-label" for="defaultCheck1"> <p class="h5">${o.description}</p></label>
                                    
                                </div>
                                  
                                  <button id="${e+150}" class="icon" onclick="deleteTask(${e})" ><span title="Eliminar" class="material-symbols-outlined">delete</span></button>
                                  <button id="${e+200}" class="icon" onclick="setPriority(${e})" ><span title="Prioridad alta" class="material-symbols-outlined">priority_high</span></button>
                                </div>`);inputText.value="",c.innerHTML=i.join(""),t.forEach((o,e)=>{if(o.new===!1&&(document.getElementById(e).classList.add("animate__zoomIn"),a[e].new=!0,localStorage.setItem("tasks",JSON.stringify(a)),setTimeout(()=>{document.getElementById(e).classList.remove("animate__zoomIn")},1e3)),o.done===!0){let s=e+100;document.getElementById(e).classList.add("task--done"),document.getElementById(s).checked=!0}if(o.priority==="high"){let s=e+150,n=e+200;document.getElementById(e).classList.add("priority--high"),document.getElementById(s).classList.add("icon--priority"),document.getElementById(n).classList.add("icon--priority")}})};window.deleteTask=t=>{document.getElementById(t).classList.add("animate__zoomOut"),setTimeout(()=>{a.splice(t,1),localStorage.setItem("tasks",JSON.stringify(a)),m()},500)};const $=t=>t.sort((o,e)=>o.priority<e.priority?-1:o.priority>e.priority?1:0);window.setPriority=t=>{let i=t+150,o=t+200;a[t].priority==="low"?a[t].priority="high":a[t].priority="low",a[t].priority==="high"?(document.getElementById(t).classList.add("priority--high"),document.getElementById(i).classList.add("icon--priority"),document.getElementById(o).classList.add("icon--priority")):(document.getElementById(t).classList.remove("priority--high"),document.getElementById(i).classList.remove("icon--priority"),document.getElementById(o).classList.remove("icon--priority")),$(a),localStorage.setItem("tasks",JSON.stringify(a)),setTimeout(()=>{m()},400)};window.done=t=>{a[t].done===!1?a[t].done=!0:a[t].done=!1,a[t].done===!0?document.getElementById(t).classList.add("task--done"):(document.getElementById(t).classList.add("task--nodone"),document.getElementById(t).classList.remove("task--done")),localStorage.setItem("tasks",JSON.stringify(a))};S();
